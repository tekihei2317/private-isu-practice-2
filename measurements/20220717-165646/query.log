make[1]: Entering directory '/home/isucon/private_isu/webapp'
sudo pt-query-digest /var/log/mysql/mysql-slow.log

# 27.9s user time, 60ms system time, 29.83M rss, 35.50M vsz
# Current date: Sun Jul 17 16:57:15 2022
# Hostname: ip-172-31-32-108
# Files: /var/log/mysql/mysql-slow.log
# Overall: 456.07k total, 26 unique, 427.03 QPS, 0.05x concurrency _______
# Time range: 2022-07-17T07:38:17 to 2022-07-17T07:56:05
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time            54s     2us   246ms   119us    93us     2ms    54us
# Lock time          361ms       0     1ms       0     1us     2us     1us
# Rows sent        481.13k       0      22    1.08    2.90    2.06    0.99
# Rows examine       7.20M       0   9.89k   16.56    9.83  379.63    0.99
# Query size        23.36M      28     218   53.70   80.10   20.56   36.69

# Profile
# Rank Query ID                     Response time Calls  R/Call V/M   Item
# ==== ============================ ============= ====== ====== ===== ====
#    1 0x4087F945CD9D7D595FC97F8... 20.0234 36.8%    663 0.0302  0.08 SELECT posts
#    2 0x396201721CD58410E070DA9...  9.6568 17.7% 196520 0.0000  0.00 SELECT users
#    3 0x422390B42D4DD86C7539A5F...  6.6520 12.2%  96223 0.0001  0.00 SELECT comments
#    4 0x624863D30DAC59FA1684928...  6.2759 11.5%  95010 0.0001  0.00 SELECT comments
#    5 0x979CA34F096654135383AD4...  3.9366  7.2%    338 0.0116  0.00 SELECT posts
#    6 0xDA556F9115773A1A99AA016...  1.6854  3.1%  28231 0.0001  0.00 ADMIN PREPARE
#    7 0x9F2038550F51B0A3AB05CA5...  1.6073  3.0%    266 0.0060  0.03 INSERT comments
#    8 0x26489ECBE26887E480CA806...  1.1245  2.1%    266 0.0042  0.00 INSERT users
#    9 0xE83B5CEE90073D4A0C8A2D8...  0.8642  1.6%   3938 0.0002  0.00 SELECT posts
# MISC 0xMISC                        2.6377  4.8%  34617 0.0001   0.0 <17 ITEMS>

# Query 1: 0.62 QPS, 0.02x concurrency, ID 0x4087F945CD9D7D595FC97F845D5F590C at byte 2430287
# Scores: V/M = 0.08
# Time range: 2022-07-17T07:38:19 to 2022-07-17T07:56:05
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     663
# Exec time     36     20s   139us   246ms    30ms   116ms    48ms     2ms
# Lock time      0     1ms     1us   114us     1us     1us     4us     1us
# Rows sent      0     663       1       1       1       1       0       1
# Rows examine   0     663       1       1       1       1       0       1
# Query size     0  32.95k      48      51   50.89   49.17    0.29   49.17
# String:
# Hosts        localhost
# Users        isuconp
# Query_time distribution
#   1us
#  10us
# 100us  ########################################
#   1ms  ################################################################
#  10ms  #####################
# 100ms  ####################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'posts'\G
#    SHOW CREATE TABLE `posts`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT mime, imgdata FROM `posts` WHERE `id` = 470\G

# Query 2: 184.18 QPS, 0.01x concurrency, ID 0x396201721CD58410E070DA9421CA8C8D at byte 96456765
# Scores: V/M = 0.00
# Time range: 2022-07-17T07:38:18 to 2022-07-17T07:56:05
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         43  196520
# Exec time     17     10s    35us    10ms    49us    63us    43us    44us
# Lock time     47   172ms       0   450us       0     1us     1us     1us
# Rows sent     39 191.91k       1       1       1       1       0       1
# Rows examine   2 191.91k       1       1       1       1       0       1
# Query size    30   7.10M      36      39   37.87   36.69    0.17   36.69
# String:
# Hosts        localhost
# Users        isuconp
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  #
#   1ms  #
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'users'\G
#    SHOW CREATE TABLE `users`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM `users` WHERE `id` = 88\G

# Query 3: 90.18 QPS, 0.01x concurrency, ID 0x422390B42D4DD86C7539A5F45EB76A80 at byte 22822750
# Scores: V/M = 0.00
# Time range: 2022-07-17T07:38:18 to 2022-07-17T07:56:05
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         21   96223
# Exec time     12      7s    55us     2ms    69us    93us    19us    63us
# Lock time     24    88ms       0    98us       0     1us       0     1us
# Rows sent     19  93.97k       1       1       1       1       0       1
# Rows examine   3 289.26k       0      23    3.08   12.54    4.80       0
# Query size    25   6.03M      62      66   65.70   65.89    1.43   65.89
# String:
# Hosts        localhost
# Users        isuconp
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ##
#   1ms  #
#  10ms
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'comments'\G
#    SHOW CREATE TABLE `comments`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(*) AS `count` FROM `comments` WHERE `post_id` = 10593\G

# Query 4: 89.04 QPS, 0.01x concurrency, ID 0x624863D30DAC59FA16849282195BE09F at byte 99834450
# Scores: V/M = 0.00
# Time range: 2022-07-17T07:38:18 to 2022-07-17T07:56:05
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         20   95010
# Exec time     11      6s    51us     8ms    66us    84us    29us    57us
# Lock time     22    80ms       0   240us       0     1us     1us     1us
# Rows sent     17  84.93k       0       3    0.92    2.90    1.33       0
# Rows examine   1  84.93k       0       3    0.92    2.90    1.33       0
# Query size    32   7.49M      79      83   82.71   80.10    0.08   80.10
# String:
# Hosts        localhost
# Users        isuconp
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ##
#   1ms  #
#  10ms
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'comments'\G
#    SHOW CREATE TABLE `comments`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM `comments` WHERE `post_id` = 10724 ORDER BY `created_at` DESC LIMIT 3\G

# Query 5: 0.32 QPS, 0.00x concurrency, ID 0x979CA34F096654135383AD4AD4308BFE at byte 35013304
# Scores: V/M = 0.00
# Time range: 2022-07-17T07:38:18 to 2022-07-17T07:56:05
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     338
# Exec time      7      4s    11ms    24ms    12ms    13ms     1ms    11ms
# Lock time      0   716us     1us   177us     2us     1us    10us     1us
# Rows sent      0   3.33k       4      19   10.09   14.52    2.86    9.83
# Rows examine  44   3.24M   9.77k   9.89k   9.81k   9.80k   61.50   9.80k
# Query size     0  40.56k     122     123  122.89  118.34       0  118.34
# String:
# Hosts        localhost
# Users        isuconp
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms  ################################################################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'posts'\G
#    SHOW CREATE TABLE `posts`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT `id`, `user_id`, `body`, `mime`, `created_at` FROM `posts` WHERE `user_id` = 347 ORDER BY `created_at` DESC limit 20\G

# Query 6: 26.43 QPS, 0.00x concurrency, ID 0xDA556F9115773A1A99AA0165670CE848 at byte 15683314
# Scores: V/M = 0.00
# Time range: 2022-07-17T07:38:17 to 2022-07-17T07:56:05
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          6   28231
# Exec time      3      2s    24us     5ms    59us   119us    69us    47us
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     3 827.08k      30      30      30      30       0      30
# String:
# Hosts        localhost
# Users        isuconp
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ####
#   1ms  #
#  10ms
# 100ms
#    1s
#  10s+
administrator command: Prepare\G

# Query 7: 0.25 QPS, 0.00x concurrency, ID 0x9F2038550F51B0A3AB05CA526E3FEDDC at byte 12763304
# Scores: V/M = 0.03
# Time range: 2022-07-17T07:38:18 to 2022-07-17T07:56:05
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     266
# Exec time      2      2s     3ms   142ms     6ms     7ms    13ms     4ms
# Lock time      0   432us     1us    86us     1us     1us     5us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  36.02k      92     213  138.66  174.84   24.46  136.99
# String:
# Hosts        localhost
# Users        isuconp
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  #
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'comments'\G
#    SHOW CREATE TABLE `comments`\G
INSERT INTO `comments` (`post_id`, `user_id`, `comment`) VALUES ('9796',971,'ヽ(；▽；)ノおひさっ♪♪')\G

# Query 8: 0.25 QPS, 0.00x concurrency, ID 0x26489ECBE26887E480CA8067F971EA04 at byte 50614003
# Scores: V/M = 0.00
# Time range: 2022-07-17T07:38:18 to 2022-07-17T07:56:05
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     266
# Exec time      2      1s     3ms    14ms     4ms     5ms   951us     4ms
# Lock time      0   508us     1us     3us     1us     2us       0     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  56.11k     216     216     216     216       0     216
# String:
# Hosts        localhost
# Users        isuconp
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'users'\G
#    SHOW CREATE TABLE `users`\G
INSERT INTO `users` (`account_name`, `passhash`) VALUES ('qNJP7c3h4gBmKHjznMQYq9TGv','9871807705bc233f01f36f80236eb23a562dc7f27238a16b821d196a6eb811657e9e1a3eea05b38771be5908b3ee71cc979f488c30c7dcee440ba4cad86e27d4')\G

# Query 9: 3.69 QPS, 0.00x concurrency, ID 0xE83B5CEE90073D4A0C8A2D869BE0C528 at byte 36296041
# Scores: V/M = 0.00
# Time range: 2022-07-17T07:38:18 to 2022-07-17T07:56:05
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3938
# Exec time      1   864ms   113us    10ms   219us   384us   238us   176us
# Lock time      2     7ms     1us     1ms     1us     1us    19us     1us
# Rows sent     15  76.91k      20      20      20      20       0      20
# Rows examine   1  76.91k      20      20      20      20       0      20
# Query size     1 388.42k     101     101     101     101       0     101
# String:
# Hosts        localhost
# Users        isuconp
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  #
#  10ms
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'posts'\G
#    SHOW CREATE TABLE `posts`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT `id`, `user_id`, `body`, `created_at`, `mime` FROM `posts` ORDER BY `created_at` DESC limit 20\G
make[1]: Leaving directory '/home/isucon/private_isu/webapp'
