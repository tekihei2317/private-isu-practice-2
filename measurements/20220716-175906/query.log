make[1]: Entering directory '/home/isucon/private_isu/webapp'
sudo pt-query-digest /var/log/mysql/mysql-slow.log

# 3.1s user time, 20ms system time, 29.34M rss, 35.27M vsz
# Current date: Sat Jul 16 17:59:10 2022
# Hostname: ip-172-31-39-43
# Files: /var/log/mysql/mysql-slow.log
# Overall: 41.91k total, 27 unique, 74.18 QPS, 0.10x concurrency _________
# Time range: 2022-07-16T08:48:46 to 2022-07-16T08:58:11
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time            59s     1us   248ms     1ms   125us    11ms    42us
# Lock time           17ms       0    39us       0     1us       0       0
# Rows sent        258.68k       0   9.77k    6.32    0.99  233.25       0
# Rows examine       7.12M       0  97.66k  178.24    0.99   3.96k       0
# Query size         1.66M      17     216   41.66   80.10   18.42   31.70

# Profile
# Rank Query ID                      Response time Calls R/Call V/M   Item
# ==== ============================= ============= ===== ====== ===== ====
#    1 0x1CD48AE21E9C97BE44D0B069... 41.2544 70.0%   489 0.0844  0.02 SELECT posts
#    2 0xE83DA93257C7B787C67B1B05...  5.7722  9.8%    69 0.0837  0.02 SELECT posts
#    3 0xC9383ACA6FF14C29E819735F...  5.5049  9.3%    69 0.0798  0.01 SELECT posts
#    4 0xCDEB1AFF2AE2BE51B2ED5CF0...  1.4040  2.4%    69 0.0203  0.00 SELECT comments
#    5 0x19759A5557089FD5B718D440...  1.2929  2.2%    20 0.0646  0.04 SELECT posts
#    6 0x8E21829C2D7DC2B5180B7C44...  1.0934  1.9%    17 0.0643  0.03 INSERT posts
# MISC 0xMISC                         2.5794  4.4% 41178 0.0001   0.0 <21 ITEMS>

# Query 1: 0.87 QPS, 0.07x concurrency, ID 0x1CD48AE21E9C97BE44D0B06948A2E5CC at byte 2360576
# Scores: V/M = 0.02
# Time range: 2022-07-16T08:48:46 to 2022-07-16T08:58:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1     489
# Exec time     70     41s   981us   248ms    84ms   141ms    37ms    82ms
# Lock time      4   767us       0    16us     1us     2us     1us     1us
# Rows sent     84 218.18k       0   9.77k  456.89   13.83   1.93k    7.70
# Rows examine   5 436.36k       0  19.53k  913.78   27.38   4.02k   15.25
# Query size     2  43.93k      92      92      92      92       0      92
# String:
# Hosts        localhost
# Users        isuconp
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ######
#  10ms  ################################################################
# 100ms  ###################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'posts'\G
#    SHOW CREATE TABLE `posts`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT `id`, `user_id`, `body`, `created_at`, `mime` FROM `posts` ORDER BY `created_at` DESC\G

# Query 2: 0.13 QPS, 0.01x concurrency, ID 0xE83DA93257C7B787C67B1B05D2469241 at byte 8100274
# Scores: V/M = 0.02
# Time range: 2022-07-16T08:48:46 to 2022-07-16T08:57:31
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      69
# Exec time      9      6s     1ms   194ms    84ms   128ms    40ms    87ms
# Lock time      0   128us     1us    39us     1us     1us     4us     1us
# Rows sent      0      27       0      13    0.39       0    1.94       0
# Rows examine   0  29.79k       0   9.78k  442.04   12.54   1.90k    6.98
# Query size     0   7.67k     113     114  113.88  112.70       0  112.70
# String:
# Hosts        localhost
# Users        isuconp
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################
#  10ms  ################################################################
# 100ms  ################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'posts'\G
#    SHOW CREATE TABLE `posts`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT `id`, `user_id`, `body`, `mime`, `created_at` FROM `posts` WHERE `user_id` = 499 ORDER BY `created_at` DESC\G

# Query 3: 0.13 QPS, 0.01x concurrency, ID 0xC9383ACA6FF14C29E819735F00B6DBDF at byte 2365513
# Scores: V/M = 0.01
# Time range: 2022-07-16T08:48:46 to 2022-07-16T08:57:31
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      69
# Exec time      9      6s     2ms   178ms    80ms   122ms    30ms    71ms
# Lock time      0   138us     1us     4us     2us     2us       0     1us
# Rows sent      0      27       0      13    0.39       0    1.94       0
# Rows examine   0  29.76k       0   9.77k  441.65   12.54   1.90k    6.98
# Query size     0   3.09k      45      46   45.88   44.60    0.00   44.60
# String:
# Hosts        localhost
# Users        isuconp
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ####
#  10ms  ################################################################
# 100ms  ########################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'posts'\G
#    SHOW CREATE TABLE `posts`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT `id` FROM `posts` WHERE `user_id` = 137\G

# Query 4: 0.13 QPS, 0.00x concurrency, ID 0xCDEB1AFF2AE2BE51B2ED5CF03D4E749F at byte 2240145
# Scores: V/M = 0.00
# Time range: 2022-07-16T08:48:46 to 2022-07-16T08:57:31
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      69
# Exec time      2      1s    15ms    58ms    20ms    38ms     8ms    17ms
# Lock time      0   134us     1us     4us     1us     2us       0     1us
# Rows sent      0      69       1       1       1       1       0       1
# Rows examine  92   6.58M  97.66k  97.66k  97.66k  97.66k       0  97.66k
# Query size     0   4.17k      61      62   61.88   59.77       0   59.77
# String:
# Hosts        localhost
# Users        isuconp
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms  ################################################################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'comments'\G
#    SHOW CREATE TABLE `comments`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(*) AS count FROM `comments` WHERE `user_id` = 104\G

# Query 5: 0.04 QPS, 0.00x concurrency, ID 0x19759A5557089FD5B718D440CBBB5C55 at byte 2502781
# Scores: V/M = 0.04
# Time range: 2022-07-16T08:48:46 to 2022-07-16T08:57:31
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      20
# Exec time      2      1s    60us   145ms    65ms   116ms    50ms    91ms
# Lock time      0    30us     1us     3us     1us     1us       0     1us
# Rows sent      0      20       1       1       1       1       0       1
# Rows examine   0      20       1       1       1       1       0       1
# Query size     0     837      41      42   41.85   40.45       0   40.45
# String:
# Hosts        localhost
# Users        isuconp
# Query_time distribution
#   1us
#  10us  ######################################################
# 100us  #########
#   1ms
#  10ms  ######################################################
# 100ms  ################################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'posts'\G
#    SHOW CREATE TABLE `posts`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM `posts` WHERE `id` = '10087'\G

# Query 6: 0.03 QPS, 0.00x concurrency, ID 0x8E21829C2D7DC2B5180B7C446772F96A at byte 8728903
# Scores: V/M = 0.03
# Time range: 2022-07-16T08:48:46 to 2022-07-16T08:57:31
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      17
# Exec time      1      1s     3ms   136ms    64ms   134ms    41ms    69ms
# Lock time      0    24us     1us     3us     1us     1us       0     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0   2.42k      95     199  145.71  166.51   22.12  143.84
# String:
# Hosts        localhost
# Users        isuconp
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  #################
#  10ms  ################################################################
# 100ms  #################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'posts'\G
#    SHOW CREATE TABLE `posts`\G
INSERT INTO `posts` (`user_id`, `mime`, `body`) VALUES (485,'image/png','ｵﾒｯﾄﾛﾏﾝｽ ☆彡 ＼(\'-\'*)-.-) ﾌﾀﾘﾉﾎｼﾀﾞﾖ♪')\G
make[1]: Leaving directory '/home/isucon/private_isu/webapp'
