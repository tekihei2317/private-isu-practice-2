make[1]: Entering directory '/home/isucon/private_isu/webapp'
sudo pt-query-digest /var/log/mysql/mysql-slow.log

# 8.8s user time, 30ms system time, 29.54M rss, 35.27M vsz
# Current date: Sun Jul 17 12:37:10 2022
# Hostname: ip-172-31-32-108
# Files: /var/log/mysql/mysql-slow.log
# Overall: 149.71k total, 25 unique, 2.34k QPS, 0.48x concurrency ________
# Time range: 2022-07-17T03:35:38 to 2022-07-17T03:36:42
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time            31s     1us   246ms   205us    76us     4ms    35us
# Lock time           56ms       0   191us       0     1us       0       0
# Rows sent          5.10M       0   9.81k   35.69    0.99  577.81       0
# Rows examine      19.68M       0  97.72k  137.83    2.90   2.57k       0
# Query size         5.72M      28     216   40.07   80.10   16.79   31.70

# Profile
# Rank Query ID                      Response time Calls R/Call V/M   Item
# ==== ============================= ============= ===== ====== ===== ====
#    1 0x4087F945CD9D7D595FC97F84... 14.0566 45.6%  1237 0.0114  0.12 SELECT posts
#    2 0x1CD48AE21E9C97BE44D0B069...  8.2019 26.6%   500 0.0164  0.00 SELECT posts
#    3 0xDA556F9115773A1A99AA0165...  2.0254  6.6% 49770 0.0000  0.00 ADMIN PREPARE
#    4 0xCDEB1AFF2AE2BE51B2ED5CF0...  1.2889  4.2%    83 0.0155  0.00 SELECT comments
#    5 0x396201721CD58410E070DA94...  1.2067  3.9% 23716 0.0001  0.00 SELECT users
#    6 0x422390B42D4DD86C7539A5F4...  0.8452  2.7% 11771 0.0001  0.00 SELECT comments
#    7 0x624863D30DAC59FA16849282...  0.7765  2.5% 11555 0.0001  0.00 SELECT comments
#    8 0x7A12D0C8F433684C3027353C...  0.5133  1.7%    28 0.0183  0.00 SELECT posts
#    9 0xE83DA93257C7B787C67B1B05...  0.4505  1.5%    83 0.0054  0.00 SELECT posts
# MISC 0xMISC                         1.4408  4.7% 50971 0.0000   0.0 <16 ITEMS>

# Query 1: 19.63 QPS, 0.22x concurrency, ID 0x4087F945CD9D7D595FC97F845D5F590C at byte 7934362
# Scores: V/M = 0.12
# Time range: 2022-07-17T03:35:39 to 2022-07-17T03:36:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1237
# Exec time     45     14s    92us   246ms    11ms   100ms    37ms   167us
# Lock time      3     2ms     1us    76us     1us     1us     2us     1us
# Rows sent      0   1.21k       1       1       1       1       0       1
# Rows examine   0   1.21k       1       1       1       1       0       1
# Query size     1  61.63k      49      52   51.01   49.17    0.44   49.17
# String:
# Hosts        localhost
# Users        isuconp
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ###
#  10ms  ##
# 100ms  ####
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'posts'\G
#    SHOW CREATE TABLE `posts`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT mime, imgdata FROM `posts` WHERE `id` = 5034\G

# Query 2: 7.94 QPS, 0.13x concurrency, ID 0x1CD48AE21E9C97BE44D0B06948A2E5CC at byte 16669518
# Scores: V/M = 0.00
# Time range: 2022-07-17T03:35:39 to 2022-07-17T03:36:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     500
# Exec time     26      8s    15ms    86ms    16ms    19ms     3ms    16ms
# Lock time      1   672us     1us     3us     1us     1us       0     1us
# Rows sent     93   4.78M   9.77k   9.81k   9.79k   9.80k      25   9.33k
# Rows examine  48   9.56M  19.53k  19.63k  19.58k  19.40k       0  19.40k
# Query size     0  44.92k      92      92      92      92       0      92
# String:
# Hosts        localhost
# Users        isuconp
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms  ################################################################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'posts'\G
#    SHOW CREATE TABLE `posts`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT `id`, `user_id`, `body`, `created_at`, `mime` FROM `posts` ORDER BY `created_at` DESC\G

# Query 3: 777.66 QPS, 0.03x concurrency, ID 0xDA556F9115773A1A99AA0165670CE848 at byte 31241330
# Scores: V/M = 0.00
# Time range: 2022-07-17T03:35:38 to 2022-07-17T03:36:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         33   49770
# Exec time      6      2s    30us     6ms    40us    60us    37us    35us
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size    24   1.42M      30      30      30      30       0      30
# String:
# Hosts        localhost
# Users        isuconp
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  #
#   1ms  #
#  10ms
# 100ms
#    1s
#  10s+
administrator command: Prepare\G

# Query 4: 1.36 QPS, 0.02x concurrency, ID 0xCDEB1AFF2AE2BE51B2ED5CF03D4E749F at byte 16657771
# Scores: V/M = 0.00
# Time range: 2022-07-17T03:35:39 to 2022-07-17T03:36:40
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      83
# Exec time      4      1s    15ms    21ms    16ms    16ms   678us    15ms
# Lock time      0    83us     1us     1us     1us     1us       0     1us
# Rows sent      0      83       1       1       1       1       0       1
# Rows examine  40   7.92M  97.66k  97.72k  97.69k  97.04k       0  97.04k
# Query size     0   5.02k      61      62   61.90   59.77       0   59.77
# String:
# Hosts        localhost
# Users        isuconp
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms  ################################################################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'comments'\G
#    SHOW CREATE TABLE `comments`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(*) AS count FROM `comments` WHERE `user_id` = 213\G

# Query 5: 376.44 QPS, 0.02x concurrency, ID 0x396201721CD58410E070DA9421CA8C8D at byte 31907100
# Scores: V/M = 0.00
# Time range: 2022-07-17T03:35:39 to 2022-07-17T03:36:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         15   23716
# Exec time      3      1s    42us     4ms    50us    63us    31us    47us
# Lock time     45    25ms       0    23us     1us     1us       0     1us
# Rows sent      0  23.16k       1       1       1       1       0       1
# Rows examine   0  23.16k       1       1       1       1       0       1
# Query size    14 877.22k      36      39   37.88   36.69    0.16   36.69
# String:
# Hosts        localhost
# Users        isuconp
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  #
#   1ms  #
#  10ms
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'users'\G
#    SHOW CREATE TABLE `users`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM `users` WHERE `id` = 32\G

# Query 6: 186.84 QPS, 0.01x concurrency, ID 0x422390B42D4DD86C7539A5F45EB76A80 at byte 23097327
# Scores: V/M = 0.00
# Time range: 2022-07-17T03:35:39 to 2022-07-17T03:36:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          7   11771
# Exec time      2   845ms    61us     2ms    71us   119us    27us    63us
# Lock time     23    13ms       0    18us     1us     1us       0     1us
# Rows sent      0  11.50k       1       1       1       1       0       1
# Rows examine   0  32.81k       0      22    2.85   11.95    4.72       0
# Query size    12 755.51k      63      66   65.72   65.89    1.39   65.89
# String:
# Hosts        localhost
# Users        isuconp
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ####
#   1ms  #
#  10ms
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'comments'\G
#    SHOW CREATE TABLE `comments`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(*) AS `count` FROM `comments` WHERE `post_id` = 10090\G

# Query 7: 183.41 QPS, 0.01x concurrency, ID 0x624863D30DAC59FA16849282195BE09F at byte 10246520
# Scores: V/M = 0.00
# Time range: 2022-07-17T03:35:39 to 2022-07-17T03:36:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          7   11555
# Exec time      2   777ms    58us   247us    67us    80us    10us    60us
# Lock time     21    12ms       0    17us     1us     1us       0     1us
# Rows sent      0   9.24k       0       3    0.82    2.90    1.29       0
# Rows examine   0   9.24k       0       3    0.82    2.90    1.29       0
# Query size    15 933.59k      80      83   82.73   80.10    0.09   80.10
# String:
# Hosts        localhost
# Users        isuconp
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  #
#   1ms
#  10ms
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'comments'\G
#    SHOW CREATE TABLE `comments`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM `comments` WHERE `post_id` = 3630 ORDER BY `created_at` DESC LIMIT 3\G

# Query 8: 0.55 QPS, 0.01x concurrency, ID 0x7A12D0C8F433684C3027353C36CAB572 at byte 18212720
# Scores: V/M = 0.00
# Time range: 2022-07-17T03:35:46 to 2022-07-17T03:36:37
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      28
# Exec time      1   513ms    18ms    22ms    18ms    18ms   951us    17ms
# Lock time      0    41us     1us     2us     1us     1us       0     1us
# Rows sent      5 272.49k   9.71k   9.75k   9.73k   9.33k       0   9.33k
# Rows examine   2 546.66k  19.50k  19.55k  19.52k  19.40k       0  19.40k
# Query size     0   3.72k     136     136     136     136       0     136
# String:
# Hosts        localhost
# Users        isuconp
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms  ################################################################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'posts'\G
#    SHOW CREATE TABLE `posts`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT `id`, `user_id`, `body`, `mime`, `created_at` FROM `posts` WHERE `created_at` <= '2016-01-02 11:46:02' ORDER BY `created_at` DESC\G

# Query 9: 1.36 QPS, 0.01x concurrency, ID 0xE83DA93257C7B787C67B1B05D2469241 at byte 10781646
# Scores: V/M = 0.00
# Time range: 2022-07-17T03:35:39 to 2022-07-17T03:36:40
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      83
# Exec time      1   450ms     5ms     9ms     5ms     7ms     1ms     5ms
# Lock time      0   108us     1us     2us     1us     1us       0     1us
# Rows sent      0     837       4      19   10.08   13.83    3.02    9.83
# Rows examine   4 813.39k   9.78k   9.83k   9.80k   9.80k      28   9.80k
# Query size     0   9.23k     113     114  113.90  112.70       0  112.70
# String:
# Hosts        localhost
# Users        isuconp
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'posts'\G
#    SHOW CREATE TABLE `posts`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT `id`, `user_id`, `body`, `mime`, `created_at` FROM `posts` WHERE `user_id` = 257 ORDER BY `created_at` DESC\G
make[1]: Leaving directory '/home/isucon/private_isu/webapp'
